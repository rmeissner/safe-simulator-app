{"version":3,"sources":["logic/sapp/safeAppsSDK.ts","logic/injected/ethereum.ts","logic/simulation/processor.ts","logic/service/register.ts","logic/service/details.ts","components/simulation/results/Logs.tsx","components/simulation/results/Call.tsx","components/simulation/results/Calls.tsx","components/simulation/results/StorageChanges.tsx","components/simulation/results/CallTree.tsx","components/simulation/SimulationResults.tsx","components/MultisigTransaction.tsx","components/simulation/Simulation.tsx","routes/SimulationRoute.tsx","logic/service/list.ts","components/transactions/TransactionList.tsx","routes/DashboardRoute.tsx","App.tsx","logic/sapp/hooks.ts","reportWebVitals.ts","index.tsx"],"names":["appsSdk","SafeAppsSDK","sleep","timeout","value","Promise","cb","setTimeout","checkIsSafeApp","a","any","safe","getInfo","safeInfo","getSafeInfo","getChainId","chainId","safeAppsProvider","SafeAppProvider","safeAddress","parseInt","threshold","owners","eip1193Provider","window","ethereum","ethereumProvider","undefined","ethers","providers","Web3Provider","getNetwork","baseOptions","db_path","gasLimit","gasPrice","vmErrorsOnRPCResponse","logging","quiet","verbose","debug","buildSimulationEnv","provider","options","db","memdown","fork","network","Ganache","connector","GanacheCoreConnector","simulator","Simulator","buildAnalyzer","callHandler","CallHandler","storageHandler","StorageHandler","handlers","analyzer","HandlerAnalyzer","simulateTx","safeTx","simulationEnv","console","log","holder","infoProvider","SafeInfoProvider","loadInfo","simulateMultiSigTransaction","txHash","getTransactionReceipt","txReceipt","success","status","logs","callTree","roots","calls","storageChanges","availableServices","getServiceForChainId","service","toString","Error","loadTxDetails","safeTxHash","serviceUrl","axios","get","resp","data","Logs","useState","displayLogs","setDisplayLogs","useEffect","all","map","decodeLog","loadEventSignatures","decoded","length","address","description","primary","signature","params","p","results","Box","Accordion","AccordionSummary","AccordionDetails","sx","textAlign","decodeReturnData","decodeFunctionData","loadFunctionSignatures","join","Call","label","call","children","displayCall","setDisplayCall","slice","details","returnData","e","error","to","utils","formatEther","Typography","width","wordWrap","Calls","StorageChanges","changes","decode","displayChanges","setDisplayChange","storageSlots","forEach","change","c","decodeSafeStorageChange","slot","storageChange","history","push","valueDecoded","slotName","Tooltip","title","Fragment","CallTree","tree","element","type","SimulationResults","targetCalls","otherCalls","caller","target","targetChanges","otherChanges","paddingTop","color","MultisigTx","onSelected","justifyContent","flexDirection","display","alignItems","nonce","isExecuted","Button","onClick","operation","safeTxGas","baseGas","gasToken","refundReceiver","Simulation","connectedToSafe","simulationProgress","setSimulationProgress","setSafeTx","setResults","onSimulateTx","useCallback","safeAppsChainId","injectedChainId","simulationResults","CircularProgress","marginTop","SimulationRoute","useParams","navigate","useNavigate","loadMultisigTxs","url","TransactionList","moreUrl","setMoreUrl","loading","setLoading","multisigTxs","setMultisigTxs","loadMultisigTransactions","txs","addressParts","split","cleanSafe","getAddress","nextTxs","next","concat","tx","variant","LAST_SAFE_STORAGE_KEY","DashboardRoute","localStorage","getItem","setSafe","safeTxHashInput","setSafeTxHashInput","TextField","onChange","setItem","selectSafe","marginRight","App","isSafeApp","setIsSafeApp","checkSafeApp","useIsSafeApp","hasProvider","className","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8c221070.chunk.js","sourcesContent":["import SafeAppsSDK, { SafeInfo } from '@gnosis.pm/safe-apps-sdk';\nimport { SafeAppProvider } from '@gnosis.pm/safe-apps-provider';\n\nconst appsSdk = new SafeAppsSDK();\n\nconst sleep = <T>(timeout: number, value?: T) => new Promise<T | undefined>((cb) => setTimeout(() => cb(value), timeout))\n\nexport const checkIsSafeApp = async(): Promise<boolean> => {\n    const safeInfo = await Promise.any([appsSdk.safe.getInfo(), sleep(1000, false)])\n    return safeInfo !== false\n}\n\nexport const getSafeInfo = (): Promise<SafeInfo> => {\n    return appsSdk.safe.getInfo()\n}\n\nexport const getChainId = async(): Promise<number> => {\n    return (await getSafeInfo()).chainId\n}\n\nexport const safeAppsProvider = (chainId: string) => {\n    return new SafeAppProvider({ safeAddress: \"\", chainId: parseInt(chainId), threshold: 0, owners: [] }, appsSdk)\n}","import { ethers } from \"ethers\";\n\ndeclare let window: any;\n\nexport const hasInjectedProvider = () => !!window.ethereum\n\nexport const eip1193Provider = (): ethers.providers.ExternalProvider => {\n    return window.ethereum\n}\n\nlet ethereumProvider: ethers.providers.Web3Provider | undefined = undefined\nexport const ethersProvider = () => {\n    if (!ethereumProvider)\n        ethereumProvider = new ethers.providers.Web3Provider(eip1193Provider())\n    return ethereumProvider\n}\n\nexport const getChainId = async () => {\n    return (await ethersProvider().getNetwork()).chainId\n}","import { ethers } from 'ethers'\nimport memdown from 'memdown'\nimport Ganache from 'ganache-core'\nimport Simulator, { CallElement, CallHandler, EvmConnector, ExtendedCallParams, GanacheCoreConnector, HandlerAnalyzer, MultisigTransaction, SafeInfo, SafeInfoProvider, StepHandler, StorageHandler } from '@rmeissner/safe-simulator'\nimport { circularProgressClasses } from '@mui/material'\n\nconst baseOptions: any = { db_path: \"/\", gasLimit: 100_000_000, gasPrice: \"0x0\", vmErrorsOnRPCResponse: false, logging: { quiet: true, verbose: false, debug: false } }\n\nconst buildSimulationEnv = (provider: any): SimulationEnv => {\n    const options = baseOptions\n    options.db = memdown()\n    options.fork = provider\n    const network = Ganache.provider(options)\n    const connector = new GanacheCoreConnector(network)\n    const simulator = new Simulator(connector)\n    return {\n        connector,\n        simulator\n    }\n}\n\nconst buildAnalyzer = () => {\n    const callHandler = new CallHandler()\n    const storageHandler = new StorageHandler()\n    const handlers: StepHandler[] = [\n        callHandler,\n        storageHandler\n    ]\n    const analyzer = new HandlerAnalyzer(handlers)\n    return {\n        analyzer,\n        callHandler,\n        storageHandler\n    }\n}\n\nexport interface SimulationEnv {\n    connector: EvmConnector,\n    simulator: Simulator\n}\n\nexport interface SimulationResult {\n    simulationEnv: SimulationEnv,\n    success: boolean,\n    logs: ethers.providers.Log[],\n    callTree: CallElement[],\n    calls: Map<string, ExtendedCallParams[]>,\n    storageChanges: Map<string, any[]>,\n    safeAddress: string,\n    safeInfo: SafeInfo\n}\n\nexport const simulateTx = async (network: ethers.providers.ExternalProvider, safeTx: MultisigTransaction, simulationEnv?: SimulationEnv) => {\n    console.log({safeTx})\n    const holder: SimulationEnv = simulationEnv || buildSimulationEnv(network)\n    const provider = new ethers.providers.Web3Provider(holder.connector as any)\n    const infoProvider = new SafeInfoProvider(provider)\n    const safeInfo = await infoProvider.loadInfo(safeTx.safe)\n    const { analyzer, callHandler, storageHandler } = buildAnalyzer()\n    const txHash = await holder.simulator.simulateMultiSigTransaction(safeInfo, safeTx, analyzer)\n    const txReceipt = await provider.getTransactionReceipt(txHash)\n    return {\n        simulationEnv: holder,\n        success: txReceipt.status === 0 ? false : true,\n        logs: txReceipt.logs,\n        callTree: callHandler.roots,\n        calls: callHandler.calls,\n        storageChanges: storageHandler.storageChanges,\n        safeAddress: safeTx.safe,\n        safeInfo\n    }\n}","export const availableServices: Record<string, string> = {\n    \"1\": \"https://safe-transaction.mainnet.gnosis.io\",\n    \"4\": \"https://safe-transaction.rinkeby.gnosis.io\",\n    \"5\": \"https://safe-transaction.goerli.gnosis.io\",\n    \"10\": \"https://safe-transaction.optimism.gnosis.io\",\n    \"100\": \"https://safe-transaction.xdai.gnosis.io\",\n    \"137\": \"https://safe-transaction.polygon.gnosis.io\",\n    \"42161\": \"https://safe-transaction.arbitrum.gnosis.io\",\n    \"43114\": \"https://safe-transaction.avalanche.gnosis.io\",\n    \"1313161554\": \"https://safe-transaction.aurora.gnosis.io\"\n}\n\nexport const getServiceForChainId = (chainId: string | number): string => {\n    const service = availableServices[chainId.toString()]\n    if (!service) throw Error(\"No service available\")\n    return service\n}","import axios from \"axios\"\nimport { getServiceForChainId } from \"./register\"\nimport { ServiceMultisigTransaction } from \"./types\"\n\nexport const loadTxDetails = async(chainId: string, safeTxHash: string): Promise<ServiceMultisigTransaction> => {\n    const serviceUrl = getServiceForChainId(chainId)\n    const resp = await axios.get<ServiceMultisigTransaction>(`${serviceUrl}/api/v1/multisig-transactions/${safeTxHash}/`)\n    if (resp.status !== 200) throw Error(\"Could not load details\")\n    return resp.data\n}","import { Accordion, AccordionDetails, AccordionSummary } from \"@mui/material\"\nimport { Box } from \"@mui/system\"\nimport { decodeLog, loadEventSignatures } from \"@rmeissner/safe-simulator\"\nimport { ethers } from \"ethers\"\nimport { useEffect, useState } from \"react\"\n\nexport interface Props {\n    logs: ethers.providers.Log[]\n}\n\ninterface DisplayLog {\n    address: string,\n    description: string\n    params?: string[]\n}\n\nconst Logs: React.FC<Props> = ({ logs }) => {\n    const [displayLogs, setDisplayLogs] = useState<DisplayLog[]>([])\n    useEffect(() => {\n        (async () => {\n            const results = await Promise.all(logs.map(async (log) => {\n                const decoded = await decodeLog(log, loadEventSignatures)\n                if (decoded.length === 0) {\n                    return {\n                        address: log.address,\n                        description: \"Unknown event\",\n                    }\n                }\n                const primary = decoded[0]\n                return {\n                    address: log.address,\n                    description: primary.signature,\n                    params: primary.decoded.map((p) => p.toString())\n                }\n            }))\n            setDisplayLogs(results)\n        })()\n    }, [logs, setDisplayLogs])\n    return (<Box>\n        {displayLogs.length === 0 && <h4>No events have been emitted</h4>}\n        {displayLogs.map((log) => (<Accordion>\n            <AccordionSummary>{log.description}</AccordionSummary>\n            <AccordionDetails sx={{ textAlign: \"left\" }}>\n                emitted by<br />\n                <b>{log.address}</b><br />\n                <br />\n                Parameters:<br />\n                {log.params?.map((p) => (<>{p}<br /></>))}\n            </AccordionDetails>\n        </Accordion>))}\n    </Box>)\n}\n\nexport default Logs","import { Accordion, AccordionDetails, AccordionSummary, Typography } from \"@mui/material\"\nimport { decodeFunctionData, ExtendedCallParams, loadFunctionSignatures } from \"@rmeissner/safe-simulator\"\nimport { ethers } from \"ethers\"\nimport { useEffect, useState } from \"react\"\n\nexport interface Props {\n    label?: string,\n    call: ExtendedCallParams\n}\n\ninterface DisplayCall {\n    description: string,\n    details: ExtendedCallParams,\n    returnData?: string\n    params?: string[]\n}\n\nconst decodeReturnData = async (data: string): Promise<string | undefined> => {\n    try {\n        const decoded = await decodeFunctionData(data, loadFunctionSignatures)\n        if (decoded.length === 0) return data\n        return decoded[0].decoded.join(\",\")\n    } catch (e) {\n        return data\n    }\n}\n\nconst Call: React.FC<Props> = ({ label, call, children }) => {\n    const [displayCall, setDisplayCall] = useState<DisplayCall | undefined>(undefined)\n    useEffect(() => {\n        try {\n            (async () => {\n                const decoded = await decodeFunctionData(call.data, loadFunctionSignatures)\n                if (decoded.length === 0) {\n                    return {\n                        description: call.data.slice(0, 10),\n                        details: call\n                    }\n                }\n                const primary = decoded[0]\n                const returnData = call.returnData ? await decodeReturnData(call.returnData) : undefined\n                const displayCall = {\n                    description: primary.signature,\n                    details: call,\n                    returnData,\n                    params: primary.decoded.map((p) => p.toString())\n                }\n                setDisplayCall(displayCall)\n            })()\n        } catch (e) {\n            console.error(e)\n        }\n    }, [call, setDisplayCall])\n    if (!displayCall) return <></>\n    return (<Accordion>\n        <AccordionSummary>{label && (<>{label} - </>)}{displayCall.description}</AccordionSummary>\n        <AccordionDetails>\n            To: {displayCall.details.to}<br /><br />\n            Value: {ethers.utils.formatEther(displayCall.details.value)}<br /><br />\n            {displayCall.params && (<>\n                Parameters:<br />\n                {displayCall.params.map((p) => (\n                    <Typography sx={{\n                        width: '100%',\n                        textAlign: 'start',\n                        wordWrap: 'break-word'\n                    }}>{p}<br /></Typography>\n                ))}\n            </>)}\n            <br />\n            Raw data:<br />\n            <Typography sx={{\n                width: '100%',\n                textAlign: 'start',\n                wordWrap: 'break-word'\n            }}>{displayCall.details.data}</Typography><br />\n            {displayCall.returnData && (<>\n                Return data:<br />\n                <Typography sx={{\n                    width: '100%',\n                    textAlign: 'start',\n                    wordWrap: 'break-word'\n                }}>{displayCall.returnData}</Typography><br />\n            </>)}\n            {children}\n        </AccordionDetails>\n    </Accordion>)\n}\n\nexport default Call","import { Box } from \"@mui/system\"\nimport { ExtendedCallParams } from \"@rmeissner/safe-simulator\"\nimport Call from \"./Call\"\n\nexport interface Props {\n    calls: ExtendedCallParams[]\n}\n\nconst Calls: React.FC<Props> = ({ calls }) => {\n    return (<Box>\n        {calls.map((call) => (<Call call={call} />))}\n    </Box>)\n}\n\nexport default Calls","import { Accordion, AccordionDetails, AccordionSummary, Tooltip } from \"@mui/material\"\nimport { Box } from \"@mui/system\"\nimport { DecodedStorageChange, decodeSafeStorageChange, StorageChange } from \"@rmeissner/safe-simulator\"\nimport React, { useEffect, useState } from \"react\"\n\nexport interface Props {\n    changes: StorageChange[]\n    decode?: boolean\n}\n\ninterface DisplayStorageChanges {\n    description: string,\n    value: string,\n    history: string[]\n}\n\nconst StorageChanges: React.FC<Props> = ({ changes, decode }) => {\n    const [displayChanges, setDisplayChange] = useState<DisplayStorageChanges[]>([])\n    useEffect(() => {\n        const storageSlots: string[] = []\n        const storageChanges: Record<string, DisplayStorageChanges> = {}\n        try {\n            changes.forEach((change) => {\n                const c: DecodedStorageChange = decode === false ? change :decodeSafeStorageChange(change)\n                if (!storageChanges[c.slot]) {\n                    storageSlots.push(c.slot)\n                    storageChanges[c.slot] = {\n                        description: c.slotName || c.slot,\n                        value: c.valueDecoded?.toString() || c.value,\n                        history: []\n                    }\n                } else {\n                    const storageChange = storageChanges[c.slot]\n                    storageChange.history.push(storageChange.value)\n                    storageChange.value = c.valueDecoded?.toString() || c.value\n                }\n            })\n        } catch (e) {\n            console.error(e)\n        }\n        setDisplayChange(storageSlots.map((slot) => storageChanges[slot]))\n    }, [changes, setDisplayChange])\n\n    return (<Box>\n        {displayChanges.map((change) => (<Accordion>\n            <AccordionSummary>{change.description}</AccordionSummary>\n            <AccordionDetails>\n                New value {change.history.length > 0 && (<Tooltip title={<React.Fragment>\n                    {change.history.map((change) => <>{change}<br /></>)}\n                </React.Fragment>}><i>({change.history.length} more changes)</i></Tooltip>)}:<br />\n                <b>{change.value}</b>\n            </AccordionDetails>\n        </Accordion>))}\n    </Box>)\n}\n\nexport default StorageChanges","import { Accordion, AccordionDetails, AccordionSummary, Typography } from \"@mui/material\"\nimport { Box } from \"@mui/system\"\nimport { CallElement, decodeFunctionData, ExtendedCallParams, loadFunctionSignatures } from \"@rmeissner/safe-simulator\"\nimport { ethers } from \"ethers\"\nimport { useEffect, useState } from \"react\"\nimport Call from \"./Call\"\n\nexport interface Props {\n    tree: CallElement[]\n}\n\ninterface DisplayCall {\n    description: string,\n    details: ExtendedCallParams,\n    returnData?: string\n    params?: string[]\n}\n\nconst CallTree: React.FC<Props> = ({ tree }) => {\n    if (tree.length === 0) return <></>\n    return <Box>\n        {tree.map((element) => (\n            <Call label={element.type} call={element.params}>\n                <CallTree tree={element.children} />\n            </Call>)\n        )}\n    </Box>\n}\n\nexport default CallTree","import { Box } from \"@mui/system\"\nimport { SimulationResult } from \"../../logic/simulation/processor\"\nimport Logs from './results/Logs'\nimport Calls from './results/Calls'\nimport StorageChanges from './results/StorageChanges'\nimport { Accordion, AccordionDetails, AccordionSummary, Typography } from \"@mui/material\"\nimport CallTree from \"./results/CallTree\"\n\nexport interface Props {\n    results: SimulationResult\n}\n\nconst SimulationResults: React.FC<Props> = ({ results }) => {\n\n    const targetCalls = results.calls.get(results.safeAddress)\n    const otherCalls = []\n    for (const [caller, calls] of results.calls) {\n        if (caller !== results.safeAddress)\n            otherCalls.push({\n                target: caller,\n                calls\n            })\n    }\n\n    const targetChanges = results.storageChanges.get(results.safeAddress)\n    const otherChanges = []\n    for (const [holder, changes] of results.storageChanges) {\n        if (holder !== results.safeAddress)\n            otherChanges.push({\n                target: holder,\n                changes\n            })\n    }\n\n    return (<>\n        <Box sx={{ paddingTop: \"8px\" }}>\n            <h3>Status:</h3>\n            {results.success ? (<Typography sx={{ color: \"green\" }}>Success</Typography>) : (<Typography sx={{ color: \"red\" }}>Failure</Typography>)}\n        </Box>\n        {targetCalls && (<>\n            <Box sx={{ paddingTop: \"8px\" }}>\n                <h3>Calls from target Safe</h3>\n            </Box>\n            <Calls calls={targetCalls} />\n        </>)}\n        {targetChanges && (<>\n            <Box sx={{ paddingTop: \"8px\" }}>\n                <h3>Storage Changes on target Safe</h3>\n            </Box>\n            <StorageChanges changes={targetChanges} />\n        </>)}\n        <Box sx={{ paddingTop: \"8px\" }}>\n            <h3>Logs</h3>\n        </Box>\n        <Logs logs={results.logs} />\n        <h3>Advanced Information</h3>\n        <Accordion>\n            <AccordionSummary>Click to show</AccordionSummary>\n            <AccordionDetails>\n                {otherCalls.length > 0 && (<>\n                    <Box sx={{ paddingTop: \"8px\" }}>\n                        <h3>Calls from other contracts</h3>\n                    </Box>\n                    {otherCalls.map((e) => <Accordion>\n                        <AccordionSummary>{e.target}</AccordionSummary>\n                        <AccordionDetails>\n                            <Calls calls={e.calls} />\n                        </AccordionDetails>\n                    </Accordion>)}\n                </>)}\n                <Box sx={{ paddingTop: \"8px\" }}>\n                    <h3>Call Tree</h3>\n                </Box>\n                <CallTree tree={results.callTree} />\n                {otherChanges.length > 0 && (<>\n                    <Box sx={{ paddingTop: \"8px\" }}>\n                        <h3>Storage Changes on other contracts</h3>\n                    </Box>\n                    {otherChanges.map((e) => <Accordion>\n                        <AccordionSummary>{e.target}</AccordionSummary>\n                        <AccordionDetails>\n                            <StorageChanges changes={e.changes} decode={false} />\n                        </AccordionDetails>\n                    </Accordion>)}\n                </>)}\n            </AccordionDetails>\n        </Accordion>\n    </>)\n}\n\nexport default SimulationResults","import { Accordion, AccordionDetails, AccordionSummary, Box, Button, Typography } from \"@mui/material\"\nimport { ethers } from \"ethers\"\nimport { ServiceMultisigTransaction } from \"../logic/service/types\"\n\nexport interface Props {\n    details: ServiceMultisigTransaction\n    onSelected?: (safeTxHash: string) => void\n}\n\nconst MultisigTx: React.FC<Props> = ({ details, onSelected }) => {\n    return (<Accordion>\n        <AccordionSummary>\n            <Box sx={{justifyContent: \"space-between\", flexDirection: \"row\", display: \"flex\", width: \"100%\", alignItems: \"center\"}}>\n                <Typography>{details.nonce} - {details.safeTxHash.slice(0, 10)}{ details.isExecuted && \" (Executed)\" }</Typography>\n                {onSelected && <Button onClick={() => onSelected(details.safeTxHash)}>Simulate</Button>}\n            </Box>\n        </AccordionSummary>\n        <AccordionDetails>\n            Hash: {details.safeTxHash}<br />\n            To: {details.to}<br />\n            Value: {ethers.utils.formatEther(details.value)}<br />\n            Data: <Typography sx={{\n                width: '100%',\n                textAlign: 'start',\n                wordWrap: 'break-word'\n            }}>{details.data}</Typography>\n            Operation: {details.operation}<br />\n            Nonce: {details.nonce}<br />\n            SafeTxGas: {details.safeTxGas}<br />\n            BaseGas: {details.baseGas}<br />\n            Gas Token: {details.gasToken}<br />\n            Gas Price: {details.gasPrice}<br />\n            Refund Receiver: {details.refundReceiver}<br />\n            Gas Token: {details.refundReceiver}<br />\n        </AccordionDetails>\n    </Accordion>)\n}\n\nexport default MultisigTx","import { eip1193Provider, getChainId as injectedChainId } from '../../logic/injected/ethereum';\nimport { useCallback, useEffect, useState } from 'react';\nimport { simulateTx, SimulationResult } from '../../logic/simulation/processor';\nimport { loadTxDetails } from '../../logic/service/details';\nimport { getChainId as safeAppsChainId, safeAppsProvider } from '../../logic/sapp/safeAppsSDK';\nimport SimulationResults from './SimulationResults'\nimport MultisigTx from '../MultisigTransaction';\nimport { CircularProgress } from '@mui/material';\nimport { ServiceMultisigTransaction } from '../../logic/service/types';\n\nexport interface Props {\n    safeTxHash: string,\n    connectedToSafe: boolean,\n}\n\ninterface Results {\n    target: string,\n    simulationResults: SimulationResult\n}\n\nconst Simulation: React.FC<Props> = ({ safeTxHash, connectedToSafe }) => {\n    const [simulationProgress, setSimulationProgress] = useState(false)\n    const [safeTx, setSafeTx] = useState<ServiceMultisigTransaction | undefined>(undefined)\n    const [results, setResults] = useState<Results | undefined>(undefined)\n    const onSimulateTx = useCallback(async (safeTxHash: string) => {\n        try {\n            setSimulationProgress(true)\n            setResults(undefined)\n            setSafeTx(undefined)\n            const chainId = connectedToSafe ? await safeAppsChainId() : await injectedChainId()\n            const provider = connectedToSafe ? safeAppsProvider(chainId.toString()) : eip1193Provider()\n            const safeTx = await loadTxDetails(chainId.toString(), safeTxHash)\n            setSafeTx(safeTx)\n            const simulationResults = await simulateTx(provider, safeTx)\n            setResults({\n                target: safeTx.safe,\n                simulationResults\n            })\n        } catch (e) {\n            console.error(e)\n        } finally {\n            setSimulationProgress(false)\n        }\n    }, [connectedToSafe, results, setResults, setSimulationProgress, setSafeTx])\n    useEffect(() => {\n        onSimulateTx(safeTxHash)\n    }, [safeTxHash])\n    return (<>\n        {safeTx && (<>\n            <h3>Safe</h3>\n            {safeTx?.safe}\n            <h3>Transaction</h3>\n            <MultisigTx details={safeTx} />\n        </>)}\n        {results && (<SimulationResults results={results.simulationResults} />)}\n        {simulationProgress && <CircularProgress  sx={{ marginTop: \"24px\" }} />}\n    </>)\n}\n\nexport default Simulation","import Simulation from '../components/simulation/Simulation';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Button } from '@mui/material';\n\nexport interface Props {\n    connectedToSafe: boolean,\n}\n\nconst SimulationRoute: React.FC<Props> = ({ connectedToSafe }) => {\n    const params = useParams();\n    const navigate = useNavigate()\n    if (!params.safeTxHash) {\n        navigate(\"/\")\n        return <></>\n    }\n    return (<>\n        <Button onClick={() => navigate(\"/\")}>&lt; Back</Button><br />\n        <Simulation safeTxHash={params.safeTxHash} connectedToSafe={connectedToSafe} />\n    </>)\n}\n\nexport default SimulationRoute","import axios from \"axios\"\nimport { getServiceForChainId } from \"./register\"\nimport { Page, ServiceMultisigTransaction } from \"./types\"\n\nexport const loadMultisigTxs = async(chainId: string, safe: string, url?: string): Promise<Page<ServiceMultisigTransaction>> => {\n    const serviceUrl = getServiceForChainId(chainId)\n    const resp = await axios.get<Page<ServiceMultisigTransaction>>(url || `${serviceUrl}/api/v1/safes/${safe}/multisig-transactions/?limit=20`)\n    if (resp.status !== 200) throw Error(\"Could not load details\")\n    return resp.data\n}","import { useCallback, useEffect, useState } from 'react';\nimport { loadMultisigTxs } from '../../logic/service/list';\nimport { getChainId as safeAppsChainId } from '../../logic/sapp/safeAppsSDK';\nimport { getChainId as injectedChainId } from '../../logic/injected/ethereum';\nimport { Box, Button, CircularProgress } from '@mui/material';\nimport { ethers } from 'ethers';\nimport MultisigTx from '../MultisigTransaction';\nimport { useNavigate } from 'react-router-dom';\nimport { ServiceMultisigTransaction } from '../../logic/service/types';\n\nexport interface Props {\n    connectedToSafe: boolean\n    safe: string\n}\n\nconst TransactionList: React.FC<Props> = ({ safe, connectedToSafe }) => {\n    const navigate = useNavigate()\n    const [moreUrl, setMoreUrl] = useState<string | null>(null)\n    const [loading, setLoading] = useState<boolean>(false)\n    const [multisigTxs, setMultisigTxs] = useState<ServiceMultisigTransaction[]>([])\n    const loadMultisigTransactions = useCallback(async (safe: string, moreUrl?: string, txs?: ServiceMultisigTransaction[]) => {\n        setLoading(true)\n        try {\n            if (!txs) setMultisigTxs([])\n            const chainId = connectedToSafe ? await safeAppsChainId() : await injectedChainId()\n            // TODO: add EIP-3770 validation\n            const addressParts = safe.split(\":\")\n            const cleanSafe = ethers.utils.getAddress(addressParts[addressParts.length - 1])\n            const nextTxs = await loadMultisigTxs(chainId.toString(), cleanSafe, moreUrl)\n            setMoreUrl(nextTxs.next)\n            setMultisigTxs(txs ? txs.concat(nextTxs.results) : nextTxs.results)\n        } catch (e) {\n            console.error(e)\n        } finally {\n            setLoading(false)\n        }\n    }, [connectedToSafe, setMultisigTxs, setMoreUrl, setLoading])\n\n    useEffect(() => {\n        loadMultisigTransactions(safe)\n    }, [safe, loadMultisigTransactions])\n    return (<Box>\n        { multisigTxs.map((tx) => <MultisigTx details={tx} onSelected={(safeTxHash) => navigate(\"/\" + safeTxHash) } />) }\n        { !loading && moreUrl && <Button variant='text' onClick={() => loadMultisigTransactions(safe, moreUrl, multisigTxs)}>Load more</Button>}\n        { loading && <CircularProgress  sx={{ marginTop: \"24px\" }} />}\n    </Box>)\n}\n\nexport default TransactionList","import { Box, Button, TextField } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport TransactionList from '../components/transactions/TransactionList';\nimport { getSafeInfo } from '../logic/sapp/safeAppsSDK';\n\nexport interface Props {\n    connectedToSafe: boolean,\n}\n\nconst LAST_SAFE_STORAGE_KEY = \"SafeSimulator_Dashboard_LastSafe\"\n\nconst DashboardRoute: React.FC<Props> = ({ connectedToSafe }) => {\n    const [safe, setSafe] = useState(localStorage.getItem(LAST_SAFE_STORAGE_KEY))\n    const [safeTxHashInput, setSafeTxHashInput] = useState(\"\")\n    const navigate = useNavigate()\n    useEffect(() => {\n        (async () => {\n            if (!connectedToSafe) return\n            const safeInfo = await getSafeInfo()\n            setSafe(safeInfo.safeAddress)\n        })()\n    }, [connectedToSafe, setSafe])\n    const selectSafe = (safe: string) => {\n        localStorage.setItem(LAST_SAFE_STORAGE_KEY, safe)\n        setSafe(safe)\n    }\n    return (<Box>\n        <Box sx={{flexDirection: \"row\", display: \"flex\", alignItems: \"center\"}}>\n            {!connectedToSafe && <TextField label=\"Safe\" variant=\"standard\" value={safe} onChange={(e) => selectSafe(e.target.value)} sx={{ marginRight: \"16px\" }} />}\n            <TextField label=\"SafeTx Hash\" variant=\"standard\" value={safeTxHashInput} onChange={(e) => setSafeTxHashInput(e.target.value)} />\n            <Button onClick={() => navigate(\"/\" + safeTxHashInput)}>Simulate</Button>\n        </Box>\n        {safe && <TransactionList connectedToSafe={connectedToSafe} safe={safe} />}\n    </Box>)\n}\n\nexport default DashboardRoute","import './App.css';\nimport { useIsSafeApp } from './logic/sapp/hooks';\nimport { hasInjectedProvider } from './logic/injected/ethereum';\nimport { Route, Routes } from \"react-router-dom\";\nimport SimulationRoute from './routes/SimulationRoute';\nimport DashboardRoute from './routes/DashboardRoute';\n\nfunction App() {\n  const connectedToSafe = useIsSafeApp()\n  const hasProvider = hasInjectedProvider()\n  if (connectedToSafe === undefined) return <>\n    Loading...\n  </>\n  if (!connectedToSafe && !hasProvider) return <>\n    Only supported as Safe app or with injected provider\n  </>\n  return (\n    <div className=\"App\">\n      <Routes>\n        <Route path=\":safeTxHash\" element={<SimulationRoute connectedToSafe={connectedToSafe} />} />\n        <Route path=\"*\" element={<DashboardRoute connectedToSafe={connectedToSafe} />} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n","import { useCallback, useEffect, useState } from \"react\"\nimport { checkIsSafeApp } from \"./safeAppsSDK\"\n\nexport const useIsSafeApp = (): boolean | undefined => {\n    const [isSafeApp, setIsSafeApp] = useState<boolean | undefined>()\n    \n    const checkSafeApp = useCallback(async () => {\n        setIsSafeApp(await checkIsSafeApp())\n    }, [setIsSafeApp])\n\n    useEffect(() => {\n        checkSafeApp()\n    }, [checkSafeApp])\n    return isSafeApp\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
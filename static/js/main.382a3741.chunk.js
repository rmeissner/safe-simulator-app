(this["webpackJsonpsafe-simulator-sapp"]=this["webpackJsonpsafe-simulator-sapp"]||[]).push([[0],{1051:function(n,e){},1131:function(n,e){},1137:function(n,e){},1145:function(n,e){},1147:function(n,e){},1223:function(n,e){},1225:function(n,e){},1233:function(n,e){},1235:function(n,e){},1393:function(n,e){},1458:function(n,e,t){"use strict";t.r(e);var r=t(1),a=t.n(r),c=t(115),s=t.n(c),i=(t(653),t(74)),o=t(30),u=t(4),f=t.n(u),l=(t(655),t(626)),d=t.n(l),p=t(630),b=new d.a,j=function(n,e){return new Promise((function(t){return setTimeout((function(){return t(e)}),n)}))},h=function(){var n=Object(i.a)(f.a.mark((function n(){var e;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.any([b.safe.getInfo(),j(1e3,!1)]);case 2:return e=n.sent,n.abrupt("return",!1!==e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),x=function(){var n=Object(i.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.safe.getInfo();case 2:return n.abrupt("return",n.sent.chainId);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(n){return new p.SafeAppProvider({safeAddress:"",chainId:parseInt(n),threshold:0,owners:[]},b)},v=t(87),O=function(){return window.ethereum},m=void 0,w=function(){var n=Object(i.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(m||(m=new v.ethers.providers.Web3Provider(O())),m).getNetwork();case 2:return n.abrupt("return",n.sent.chainId);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),k=t(1498),S=t(1495),C=t(1499),y=t(1496),T=t(631),I=t.n(T),P=t(632),F=t.n(P),H=t(126),E=t.n(H),R={db_path:"/",gasLimit:1e8,gasPrice:"0x0",vmErrorsOnRPCResponse:!1,logging:{quiet:!0,verbose:!1,debug:!1}},A=function(n){var e=R;e.db=I()(),e.fork=n;var t=F.a.provider(e),r=new H.GanacheCoreConnector(t);return{connector:r,simulator:new E.a(r)}},L=function(){var n=new H.CallHandler,e=new H.StorageHandler,t=[n,e];return{analyzer:new H.HandlerAnalyzer(t),callHandler:n,storageHandler:e}},z=function(){var n=Object(i.a)(f.a.mark((function n(e,t,r){var a,c,s,i,o,u,l,d,p,b;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r||A(e),c=new v.ethers.providers.Web3Provider(a.connector),s=new H.SafeInfoProvider(c),n.next=5,s.loadInfo(t.safe);case 5:return i=n.sent,o=L(),u=o.analyzer,l=o.callHandler,d=o.storageHandler,n.next=9,a.simulator.simulateMultiSigTransaction(i,t,u);case 9:return p=n.sent,n.next=12,c.getTransactionReceipt(p);case 12:return b=n.sent,n.abrupt("return",{simulationEnv:a,success:0!==b.status,logs:b.logs,callTree:l.roots,calls:l.calls,storageChanges:d.storageChanges});case 14:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),N=t(633),B=t.n(N),J={1:"https://safe-transaction.mainnet.gnosis.io",4:"https://safe-transaction.rinkeby.gnosis.io"},M=function(n){var e=J[n.toString()];if(!e)throw Error("No service available");return e},W=function(){var n=Object(i.a)(f.a.mark((function n(e,t){var r,a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=M(e),n.next=3,B.a.get("".concat(r,"/api/v1/multisig-transactions/").concat(t,"/"));case 3:if(200===(a=n.sent).status){n.next=6;break}throw Error("Could not load details");case 6:return n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),q=t(7);var D=function(){var n,e,t=Object(r.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],u=Object(r.useState)(void 0),l=Object(o.a)(u,2),d=l[0],p=l[1],b=Object(r.useState)(!1),j=Object(o.a)(b,2),v=j[0],m=j[1],T=function(){var n=Object(r.useState)(),e=Object(o.a)(n,2),t=e[0],a=e[1],c=Object(r.useCallback)(Object(i.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=a,n.next=3,h();case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)}))),[a]);return Object(r.useEffect)((function(){c()}),[c]),t}(),I=!!window.ethereum,P=Object(r.useCallback)(function(){var n=Object(i.a)(f.a.mark((function n(e){var t,r,a,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,m(!0),!T){n.next=8;break}return n.next=5,x();case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,w();case 10:n.t0=n.sent;case 11:return t=n.t0,r=T?g(t.toString()):O(),n.next=15,W(t.toString(),e);case 15:return a=n.sent,n.next=18,z(r,a);case 18:c=n.sent,p({target:a.safe,simulationResults:c}),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(0),console.error(n.t1);case 25:return n.prev=25,m(!1),n.finish(25);case 28:case"end":return n.stop()}}),n,null,[[0,22,25,28]])})));return function(e){return n.apply(this,arguments)}}(),[T,d,p,m]);return void 0===T?Object(q.jsx)(q.Fragment,{children:"Loading..."}):T||I?Object(q.jsxs)("div",{className:"App",children:[Object(q.jsxs)(k.a,{children:[Object(q.jsx)(S.a,{label:"SafeTx Hash",variant:"standard",value:c,onChange:function(n){return s(n.target.value)}}),v?Object(q.jsx)(C.a,{}):Object(q.jsx)(y.a,{onClick:function(){return P(c)},children:"Simulate"})]}),d&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(k.a,{sx:{paddingTop:"24px"},children:Object(q.jsx)("h3",{children:"Target"})}),Object(q.jsx)(k.a,{children:d.target}),Object(q.jsx)(k.a,{sx:{paddingTop:"8px"},children:Object(q.jsx)("h3",{children:"Calls"})}),Object(q.jsx)(k.a,{children:null===(n=d.simulationResults.calls.get(d.target))||void 0===n?void 0:n.map((function(n){return Object(q.jsxs)(q.Fragment,{children:[n.to," - ",n.data.slice(0,10),Object(q.jsx)("br",{})]})}))}),Object(q.jsx)(k.a,{sx:{paddingTop:"8px"},children:Object(q.jsx)("h3",{children:"Storage Changes"})}),Object(q.jsx)(k.a,{children:null===(e=d.simulationResults.storageChanges.get(d.target))||void 0===e?void 0:e.map((function(n){return Object(q.jsxs)(q.Fragment,{children:["Slot ",Object(q.jsx)("b",{children:n.slot})," to ",Object(q.jsx)("b",{children:n.value}),Object(q.jsx)("br",{})]})}))})]})]}):Object(q.jsx)(q.Fragment,{children:"Only supported as Safe app or with injected provider"})},G=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,1500)).then((function(e){var t=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;t(n),r(n),a(n),c(n),s(n)}))};s.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(D,{})}),document.getElementById("root")),G()},653:function(n,e,t){},655:function(n,e,t){},662:function(n,e){},714:function(n,e){},716:function(n,e){},728:function(n,e){},744:function(n,e){},746:function(n,e){},748:function(n,e){},757:function(n,e){},759:function(n,e){},880:function(n,e){},920:function(n,e){},922:function(n,e){},929:function(n,e){},930:function(n,e){},988:function(n,e){},995:function(n,e){},999:function(n,e){}},[[1458,1,2]]]);
//# sourceMappingURL=main.382a3741.chunk.js.map
(this["webpackJsonpsafe-simulator-sapp"]=this["webpackJsonpsafe-simulator-sapp"]||[]).push([[0],{1051:function(e,n){},1131:function(e,n){},1137:function(e,n){},1145:function(e,n){},1147:function(e,n){},1223:function(e,n){},1225:function(e,n){},1233:function(e,n){},1235:function(e,n){},1393:function(e,n){},1458:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(115),s=t.n(c),i=(t(653),t(74)),o=t(30),u=t(4),l=t.n(u),f=(t(655),t(626)),d=t.n(f),p=t(630),j=new d.a,b=function(e,n){return new Promise((function(t){return setTimeout((function(){return t(n)}),e)}))},h=function(){var e=Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.any([j.safe.getInfo(),b(1e3,!1)]);case 2:return n=e.sent,e.abrupt("return",!1!==n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.safe.getInfo();case 2:return e.abrupt("return",e.sent.chainId);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){return new p.SafeAppProvider({safeAddress:"",chainId:parseInt(e),threshold:0,owners:[]},j)},v=t(87),O=function(){return window.ethereum},m=void 0,w=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(m||(m=new v.ethers.providers.Web3Provider(O())),m).getNetwork();case 2:return e.abrupt("return",e.sent.chainId);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=t(1498),S=t(1495),C=t(1499),y=t(1496),T=t(631),F=t.n(T),I=t(632),P=t.n(I),H=t(126),R=t.n(H),E={db_path:"/",gasLimit:1e8,gasPrice:"0x0",vmErrorsOnRPCResponse:!1,logging:{quiet:!0,verbose:!1,debug:!1}},A=function(e){var n=E;n.db=F()(),n.fork=e;var t=P.a.provider(n),r=new H.GanacheCoreConnector(t);return{connector:r,simulator:new R.a(r)}},L=function(){var e=new H.CallHandler,n=new H.StorageHandler,t=[e,n];return{analyzer:new H.HandlerAnalyzer(t),callHandler:e,storageHandler:n}},z=function(){var e=Object(i.a)(l.a.mark((function e(n,t,r){var a,c,s,i,o,u,f,d,p,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r||A(n),c=new v.ethers.providers.Web3Provider(a.connector),s=new H.SafeInfoProvider(c),e.next=5,s.loadInfo(t.safe);case 5:return i=e.sent,o=L(),u=o.analyzer,f=o.callHandler,d=o.storageHandler,e.next=9,a.simulator.simulateMultiSigTransaction(i,t,u);case 9:return p=e.sent,e.next=12,c.getTransactionReceipt(p);case 12:return j=e.sent,e.abrupt("return",{simulationEnv:a,success:0!==j.status,logs:j.logs,callTree:f.roots,calls:f.calls,storageChanges:d.storageChanges});case 14:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),N=t(633),B=t.n(N),J={1:"https://safe-transaction.mainnet.gnosis.io",4:"https://safe-transaction.rinkeby.gnosis.io"},M=function(e){var n=J[e.toString()];if(!n)throw Error("No service available");return n},W=function(){var e=Object(i.a)(l.a.mark((function e(n,t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=M(n),e.next=3,B.a.get("".concat(r,"/api/v1/multisig-transactions/").concat(t,"/"));case 3:if(200===(a=e.sent).status){e.next=6;break}throw Error("Could not load details");case 6:return e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),q=t(7);var D=function(){var e,n,t=Object(r.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],u=Object(r.useState)(void 0),f=Object(o.a)(u,2),d=f[0],p=f[1],j=Object(r.useState)(!1),b=Object(o.a)(j,2),v=b[0],m=b[1],T=function(){var e=Object(r.useState)(),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(r.useCallback)(Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,h();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[a]);return Object(r.useEffect)((function(){c()}),[c]),t}(),F=!!window.ethereum,I=Object(r.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(n){var t,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(!0),!T){e.next=8;break}return e.next=5,x();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,w();case 10:e.t0=e.sent;case 11:return t=e.t0,r=T?g(t.toString()):O(),e.next=15,W(t.toString(),n);case 15:return a=e.sent,e.next=18,z(r,a);case 18:c=e.sent,p({target:a.safe,simulationResults:c}),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(0),console.error(e.t1);case 25:return e.prev=25,m(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,22,25,28]])})));return function(n){return e.apply(this,arguments)}}(),[T,d,p,m]);return void 0===T?Object(q.jsx)(q.Fragment,{children:"Loading..."}):T||F?Object(q.jsxs)("div",{className:"App",children:[Object(q.jsxs)(k.a,{children:[Object(q.jsx)(S.a,{label:"SafeTx Hash",variant:"standard",value:c,onChange:function(e){return s(e.target.value)}}),v?Object(q.jsx)(C.a,{}):Object(q.jsx)(y.a,{onClick:function(){return I(c)},children:"Simulate"})]}),d&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(k.a,{sx:{paddingTop:"24px"},children:Object(q.jsx)("h3",{children:"Target Safe"})}),Object(q.jsx)(k.a,{children:d.target}),Object(q.jsx)(k.a,{sx:{paddingTop:"8px"},children:Object(q.jsx)("h3",{children:"Calls"})}),Object(q.jsx)(k.a,{children:null===(e=d.simulationResults.calls.get(d.target))||void 0===e?void 0:e.map((function(e){return Object(q.jsxs)(q.Fragment,{children:[e.to," - ",e.data.slice(0,10),Object(q.jsx)("br",{})]})}))}),Object(q.jsx)(k.a,{sx:{paddingTop:"8px"},children:Object(q.jsx)("h3",{children:"Storage Changes"})}),Object(q.jsx)(k.a,{children:null===(n=d.simulationResults.storageChanges.get(d.target))||void 0===n?void 0:n.map((function(e){return Object(q.jsxs)(q.Fragment,{children:["Slot ",Object(q.jsx)("b",{children:e.slot})," to ",Object(q.jsx)("b",{children:e.value}),Object(q.jsx)("br",{})]})}))}),Object(q.jsx)(k.a,{sx:{paddingTop:"8px"},children:Object(q.jsx)("h3",{children:"Logs"})}),Object(q.jsx)(k.a,{children:d.simulationResults.logs.map((function(e){return Object(q.jsxs)(q.Fragment,{children:["Address ",Object(q.jsx)("b",{children:e.address}),Object(q.jsx)("br",{}),"Topic 0 ",Object(q.jsx)("b",{children:e.topics[0]})]})}))})]})]}):Object(q.jsx)(q.Fragment,{children:"Only supported as Safe app or with injected provider"})},G=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,1500)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,s=n.getTTFB;t(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(D,{})}),document.getElementById("root")),G()},653:function(e,n,t){},655:function(e,n,t){},662:function(e,n){},714:function(e,n){},716:function(e,n){},728:function(e,n){},744:function(e,n){},746:function(e,n){},748:function(e,n){},757:function(e,n){},759:function(e,n){},880:function(e,n){},920:function(e,n){},922:function(e,n){},929:function(e,n){},930:function(e,n){},988:function(e,n){},995:function(e,n){},999:function(e,n){}},[[1458,1,2]]]);
//# sourceMappingURL=main.74b242ed.chunk.js.map